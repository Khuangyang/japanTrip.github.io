<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Khuang Yang Blogger</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round|Open+Sans">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src='https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js'></script>
 
  <style>
  /* Carousel */
  .carousel-item {
    min-height: 280px;
  }
  .carousel img {
    height: 400px;
    width: 100%;
    object-fit: cover;
    object-position: center;
  }
  
  /* Cards */
  .card img {
    height: 200px;
    width: 100%;
    object-fit: cover;
    object-position: center;
    padding: 6px;
  }
  
  /* Map Container */
  .map-container {
    min-height: 400px;
    margin-bottom: 30px;
  }
  
  @media (max-width: 768px) {
    .map-container .ratio {
      padding-bottom: 75%;
    }
  }
   
    .carousel img {
      height: 250px;
    }
  }
  </style>
</head>
<body>
  <div class="m-4">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a href="#" class="navbar-brand">
          <i class="bi bi-snow"></i>
        </a>
        <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <div class="navbar-nav">
            <a href="#" class="nav-item nav-link active">Home</a>
            <a href="#" class="nav-item nav-link">Shops</a>
            <a href="#" class="nav-item nav-link">Foods</a>
            <a href="#" class="nav-item nav-link disabled" tabindex="-1">Attractions</a>
          </div>
        </div>
      </div>
    </nav>
  </div>

  <div class="container-lg my-3">
    <!-- Carousel -->
    <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">
      <ol class="carousel-indicators">
        <li data-bs-target="#myCarousel" data-bs-slide-to="0" class="active"></li>
        <li data-bs-target="#myCarousel" data-bs-slide-to="1"></li>
        <li data-bs-target="#myCarousel" data-bs-slide-to="2"></li>
      </ol>
      
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="https://t4.ftcdn.net/jpg/02/31/80/55/360_F_231805528_rcZO6OJHBf8oiYQdqfQd4qQLY4GCR2q9.jpg" alt="Slide 1">
        </div>
        <div class="carousel-item">
          <img src="https://cdn.shopify.com/s/files/1/1083/2612/files/fuji5_480x480.jpg?v=1730864941" alt="Slide 2">
        </div>
        <div class="carousel-item">
          <img src="https://cdn.twocontinents.com/cdn-cgi/image/width=3840/https://cdn.twocontinents.com/all_trails_to_mount_fuji_will_be_charged_b0ac8bf5c1.jpg" alt="Slide 3">
        </div>
      </div>

      <a class="carousel-control-prev" href="#myCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </a>
      <a class="carousel-control-next" href="#myCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </a>
    </div>

    <!-- Cards -->
    <div class="card-group my-3">
      <div class="card">
        <img src="https://images.squarespace-cdn.com/content/v1/5bbcf00a9b8fe874ed2f03d0/8df16572-514b-4c98-9d42-803e20cb199d/hie-shrine-tokyo.jpg?format=1000w" class="card-img-top" alt="Hie Shrine">
        <div class="card-body">
          <h5 class="card-title">Hie Shrine</h5>
        </div>
      </div>
      <div class="card">
        <img src="https://images.squarespace-cdn.com/content/v1/5bbcf00a9b8fe874ed2f03d0/2cda718b-d915-452b-a69b-df63de7baa7b/imperial-palace-tokyo.jpg?format=2500w" class="card-img-top" alt="Imperial Palace">
        <div class="card-body">
          <h5 class="card-title">Imperial Palace and Gardens</h5>
        </div>
      </div>
      <div class="card">
        <img src="https://images.squarespace-cdn.com/content/v1/5bbcf00a9b8fe874ed2f03d0/02f0abf1-6ac0-4870-89a0-e9b5eb40d071/shinjuku-Gyoen-park.jpg?format=2500w" class="card-img-top" alt="Shinjuku Garden">
        <div class="card-body">
          <h5 class="card-title">Shinjuku Gyoen National Garden</h5>
        </div>
      </div>
    </div>

    <!-- Google Map -->
    <div class="map-container">
      <div class="ratio ratio-16x9">
        <iframe 
          src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d207932.8356593896!2d138.5996956679314!3d35.48076711531879!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sgoogle%20map%20fujiyoshida%20and%20top%20famous%20places!5e0!3m2!1sen!2ssg!4v1762395452978!5m2!1sen!2ssg" 
          style="border:0;" 
          allowfullscreen="" 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>

    <!-- Table -->

        
    <div class="container-fluid">
        <table class="table">
            <thead>
                <tr id="tableHeader"></tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>

    <script>
        let db;
        let allData = [];
        
        // Initialize the database (in-memory for demo purposes)
        async function initDatabase() {
            try {
                const SQL = await initSqlJs({
                    locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}`
                });
                
                // Create in-memory database with sample data
                db = new SQL.Database();
                
                // Create table
                db.run(`
                    CREATE TABLE famous_spots (
                        id INTEGER PRIMARY KEY,
                        name TEXT,
                        location TEXT,
                        category TEXT,
                        description TEXT,
                        best_season TEXT
                    )
                `);
                
                // Insert sample data
                const spots = [
                    [1, 'Mount Fuji', 'Shizuoka/Yamanashi', 'Nature', 'Japan\'s iconic mountain and highest peak at 3,776 meters', 'Summer'],
                    [2, 'Fushimi Inari Shrine', 'Kyoto', 'Temple', 'Famous for thousands of vermillion torii gates', 'Spring/Fall'],
                    [3, 'Tokyo Skytree', 'Tokyo', 'Landmark', 'World\'s tallest tower at 634 meters', 'All Year'],
                    [4, 'Arashiyama Bamboo Grove', 'Kyoto', 'Nature', 'Stunning bamboo forest pathway', 'Spring/Fall'],
                    [5, 'Hiroshima Peace Memorial', 'Hiroshima', 'Historical', 'Memorial park and museum dedicated to peace', 'All Year'],
                    [6, 'Shibuya Crossing', 'Tokyo', 'Urban', 'World\'s busiest pedestrian crossing', 'All Year'],
                    [7, 'Nara Park', 'Nara', 'Nature', 'Famous for friendly free-roaming deer', 'Spring/Fall'],
                    [8, 'Himeji Castle', 'Hyogo', 'Historical', 'UNESCO World Heritage site, pristine white castle', 'Spring'],
                    [9, 'Miyajima Island', 'Hiroshima', 'Nature', 'Famous for floating torii gate at Itsukushima Shrine', 'Fall'],
                    [10, 'Sensoji Temple', 'Tokyo', 'Temple', 'Tokyo\'s oldest temple in Asakusa', 'All Year'],
                    [11, 'Osaka Castle', 'Osaka', 'Historical', 'Historic castle with beautiful gardens', 'Spring'],
                    [12, 'Kinkaku-ji', 'Kyoto', 'Temple', 'The Golden Pavilion covered in gold leaf', 'Winter'],
                    [13, 'Takayama Old Town', 'Gifu', 'Historical', 'Well-preserved Edo-period town', 'Spring/Fall'],
                    [14, 'Jigokudani Monkey Park', 'Nagano', 'Nature', 'Wild monkeys bathing in hot springs', 'Winter'],
                    [15, 'Hakone', 'Kanagawa', 'Nature', 'Hot spring resort with views of Mt. Fuji', 'Fall']
                ];
                
                const stmt = db.prepare('INSERT INTO famous_spots VALUES (?, ?, ?, ?, ?, ?)');
                spots.forEach(spot => stmt.run(spot));
                stmt.free();
                
                loadData();
                
            } catch (error) {
                console.error('Error initializing database:', error);
                document.getElementById('loading').innerHTML = 'Error loading database: ' + error.message;
            }
        }
        
        function loadData(query = 'SELECT * FROM famous_spots ORDER BY name') {
            try {
                const result = db.exec(query);
                
                if (result.length === 0) {
                    showNoData();
                    return;
                }
                
                const data = result[0];
                allData = data.values;
                
                displayTable(data.columns, data.values);
                updateCategories(data.values);
                updateStats(data.values.length);
                
            } catch (error) {
                console.error('Query error:', error);
                alert('Error executing query: ' + error.message);
            }
        }
        
        function displayTable(columns, rows) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('tableContainer').style.display = 'block';
            
            // Create header
            const header = document.getElementById('tableHeader');
            header.innerHTML = columns
                .filter(col => col !== 'id')
                .map(col => `<th>${col.charAt(0).toUpperCase() + col.slice(1).replace('_', ' ')}</th>`)
                .join('');
            
            // Create body
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = rows.map(row => {
                const [id, name, location, category, description, season] = row;
                return `
                    <tr>
                        <td><strong>${name}</strong></td>
                        <td>${location}</td>
                        <td><span class="tag">${category}</span></td>
                        <td>${description}</td>
                        <td>${season}</td>
                    </tr>
                `;
            }).join('');
        }
        
        function updateCategories(rows) {
            const categories = [...new Set(rows.map(row => row[3]))].sort();
            const select = document.getElementById('categoryFilter');
            const currentValue = select.value;
            
            select.innerHTML = '<option value="">All Categories</option>' +
                categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
            
            select.value = currentValue;
        }
        
        function updateStats(count) {
            document.getElementById('statsText').textContent = 
                `Showing ${count} spot${count !== 1 ? 's' : ''}`;
        }
        
        function search() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            
            let query = 'SELECT * FROM famous_spots WHERE 1=1';
            
            if (searchTerm) {
                query += ` AND (LOWER(name) LIKE '%${searchTerm}%' OR LOWER(location) LIKE '%${searchTerm}%' OR LOWER(description) LIKE '%${searchTerm}%')`;
            }
            
            if (category) {
                query += ` AND category = '${category}'`;
            }
            
            query += ' ORDER BY name';
            
            loadData(query);
        }
        
        function resetSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('categoryFilter').value = '';
            loadData();
        }
        
        function showNoData() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('tableContainer').innerHTML = 
                '<div class="no-data">No spots found matching your criteria</div>';
            document.getElementById('tableContainer').style.display = 'block';
            updateStats(0);
        }
        
        // Allow search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') search();
        });
        
        // Initialize on load
        initDatabase();
    </script>
</body>
</html>
